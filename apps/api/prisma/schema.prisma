generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String               @id @default(cuid())
  name               String
  email              String               @unique
  password           String
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt
  lists              Lists[]
  vocabularyProgress VocabularyProgress[]

  CardParam CardParam[]
}

model Vocabulary {
  id                     String                   @id @default(cuid())
  name                   String
  translation            String
  pronunciation          String?
  type                   Type                     @default(WORD)
  provenance             String?
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime                 @updatedAt
  VocabularyList         VocabularyList[]
  VocabularyToCategories VocabularyToCategories[]
  VocabularyProgress     VocabularyProgress[]
}

model Lists {
  id             String           @id @default(cuid())
  name           String
  description    String
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  user           User             @relation(fields: [userId], references: [id])
  userId         String
  VocabularyList VocabularyList[]
}

model Categories {
  id                     String                   @id @default(cuid())
  name                   String
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime                 @updatedAt
  VocabularyToCategories VocabularyToCategories[]
}

model VocabularyProgress {
  id           String     @id @default(cuid())
  score        Int        @default(0)
  lastReview   DateTime?
  reviewNumber Int        @default(0)
  user         User       @relation(fields: [userId], references: [id])
  userId       String
  vocabulary   Vocabulary @relation(fields: [vocabularyId], references: [id])
  vocabularyId String
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt

  @@unique([userId, vocabularyId])
}

model VocabularyList {
  id           String     @id @default(cuid())
  vocabulary   Vocabulary @relation(fields: [vocabularyId], references: [id])
  vocabularyId String
  list         Lists      @relation(fields: [listId], references: [id])
  listId       String
  order        Int
  review       Boolean    @default(false)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt

  @@unique([listId, vocabularyId])
}

model VocabularyToCategories {
  vocabulary   Vocabulary @relation(fields: [vocabularyId], references: [id])
  vocabularyId String
  category     Categories @relation(fields: [categoryId], references: [id])
  categoryId   String
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt

  @@unique([vocabularyId, categoryId])
}

model CardParam {
  id                 String   @id @default(cuid())
  user               User     @relation(fields: [userId], references: [id])
  userId             String
  random             Boolean  @default(false)
  translationOnVerso Boolean  @default(false)
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

enum Type {
  WORD
  EXPRESSION
}
